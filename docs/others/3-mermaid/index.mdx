import Mermaid from '/src/components/Mermaid';
import Markmap from '/src/components/Markmap';

# mermaid流程图

[项目地址](https://github.com/mermaid-js/mermaid)

[在线编辑](https://mermaidjs.github.io/mermaid-live-editor/)

[官方文档](https://mermaid-js.github.io/mermaid/#/flowchart)

[本文参考地址:https://snowdreams1006.github.io/write/mermaid-flow-chart.html](https://snowdreams1006.github.io/write/mermaid-flow-chart.html)

## 布局方向

流程图布局方向,由四种基本方向组成,分别是英文单词: top(上), bottom(下),left(左)和 right(右).其中可选值: TB (从上到下),BT (从下到上),LR (从左往右)和 RL (从右往左)四种.

:::note
核心: 仅支持上下左右四个垂直方向,是英文单词首字母大写缩写.
:::

```mermaid
  graph [TB/BT/LR/RL]
    Start --> Stop
```
<div className="flex_space_between" >
  <Mermaid chart={`
    graph TB
      Start --> Stop
  `}/>
  <Mermaid chart={`
    graph BT
      Start --> Stop
  `}/>
  <Mermaid chart={`
    graph LR
      Start --> Stop
  `}/>
  <Mermaid chart={`
    graph RL
      Start --> Stop
  `}/>
</div>

## 形状

<Markmap initValue={`
# 节点形状
## [矩形]
  - [[暂不支持]]
  - [(圆柱)]
  - [{暂不支持}]
  - [/平行四边形/]
  - [\平行四边形\]
  - [/梯形\]
  - [\梯形/]
## (圆角矩形)
  - ((圆形))
  - ([体育场])
  - ({暂不支持})
## {菱形}
  - {{六边形}}
  - {[暂不支持]}
  - {(暂不支持)}
## >不对称矩形]
`} />

流程图节点形状,默认支持矩形和圆两种基本形状,包括基本形状的简单变体,支持嵌套组合形式,其中 `[]` 表示矩形,`()` 表示圆弧,`{}` 表示尖角(窃以为 `<>` 更适合)等等.

:::note
核心: 最外层代表主形状,内层辅助修饰.
:::

```mermaid
  graph [TB/BT/LR/RL]
    [Start] --> ([Stop])
```

<Mermaid chart={`
  graph TB
    id1[This is the text in the box]
    id2(This is the text in the box)
    id3([This is the text in the box])
`}/>

## 连接线

<Markmap initValue={`
# 连接线
## 实线/虚线
  ### --
  ### -.
## 有箭头/无箭头
  ### >
  ### -
## 有描述/无描述
### 实线
  #### --描述文字
  #### |描述文字|
### 虚线
  + -.描述文字
  + |描述文字|
## 加粗
  ### ==
## 组合形式
  ### -->
  ### ---
  ### -.->
  ### -.-
### 有描述实线有箭头
  #### --描述文字-->
  #### -->|描述文字|
### 有描述实线无箭头
  #### --描述文字---
  #### ---|描述文字|
### 有描述虚线有箭头
  #### -.描述文字-.->
  #### -.->|描述文字|
### 有描述虚线无箭头
  #### -.描述文字-.-
  #### -.-|描述文字|
  #### ==>
  #### ===
### 有描述加粗实线有箭头(2)
  #### ==描述文字==>
  #### ==>|描述文字|
### 有描述加粗实线无箭头(2)
  #### ==描述文字===
  #### ===|描述文字|
`} />

流程图连接线样式,支持实线和虚线以及有箭头样式和无箭头样式,除此之外还支持添加连接线描述文字,其中 -- 代表实线,实线中间多一点 -.- 代表虚线,添加箭头用右尖括号 > ,没有箭头继续用短横线 -.

:::note
核心: 先实线再虚线,先有箭头再去箭头,左边位置添加描述文字需要区分实现还是虚线,右边位置添加描述文字格式一致.
:::

```mermaid
  graph [TB/BT/LR/RL]
    A-->B
    c --- d
    e-- text -->f
```

<Mermaid chart={`
  graph TB
    A-->B
    c --- d
    e-- text -->f
`}/>

## 高级用法

<Markmap initValue={`
# 高级用法
## -->-->
## &
## ""
## %%
## subgraph
`} />

```mermaid
  graph [TB/BT/LR/RL]
     A -- text --> B -- text2 --> C
      a --> b & c--> d
      A & B--> C & D
      id1["This is the (text) in the box"]
      A["A double quote:#quot;"] -->B["A dec char:#9829;"]
```

<div className="flex_space_between" >
  <Mermaid chart={`
    graph TB
      A -- text --> B -- text2 --> C
  `}/>
  <Mermaid chart={`
    graph TB
      a --> b & c--> d
  `}/>
  <Mermaid chart={`
    graph TB
      A & B--> C & D
  `}/>
  <Mermaid chart={`
    graph TB
      id1["This is the (text) in the box"]
  `}/>
  <Mermaid chart={`
    graph TB
      A["A double quote:#quot;"] -->B["A dec char:#9829;"]
  `}/>
</div>

## 总结

`Mermaid` 是一款开源的制图工具,可使用 `Markdown` 语法绘制流程图,支持更改流程图节点形状,添加描述文字以及更改连接线样式等等.

### 英文单词缩写

> 四种布局方向的值是英文单词首字母大写缩写形式,默认仅支持垂直方向.
| 中文  |   英文   |                    示例                    |
| :---: | :------: | :----------------------------------------: |
| 图解  |  graph   |           `graph` 流程图类型标识           |
| 子图  | subgraph |        `subgraph` 嵌套子流程图标识         |
|  上   |   top    | `TB` 或 `BT` ,从上到下或从下到上的布局方向 |
|  下   |  bottom  | `BT` 或 `TB`,从下到上或从上到下的布局方向  |
|  左   |   left   | `LR` 或 `RL`,从左往右或从右往左的布局方向  |
|  右   |  right   | `RL` 或 `LR`,从右往左或从左往右的布局方向  |

### 几何化形状

> 键盘符号形象化几何形状,组合形式表示形状的叠加,其中最外层符号是主形状,嵌套符号是辅助形状.
- 基本单元

|  表示法  |            含义            |      类型      |  备注  |
| :------: | :------------------------: | :------------: | :----: |
|   `[]`   |            矩形            |    节点形状    |  支持  |
|   `()`   |          圆角矩形          |    节点形状    |  支持  |
|   `{}`   |            菱形            |    节点形状    |  支持  |
|   `<>`   |            菱形            |    节点形状    | 不支持 |
|   `--`   |            实线            |   连接线样式   |  支持  |
|   `-.`   |            虚线            |   连接线样式   |  支持  |
|   `==`   |          加粗实线          |   连接线样式   |  支持  |
|   `=:`   |          加粗虚线          |   连接线样式   | 不支持 |
|   `>`    |           有箭头           |   连接线样式   |  支持  |
|   `-`    |           无箭头           |   连接线样式   |  支持  |
| `双竖线` |     右边连接线描述文字     | 连接线描述文字 |  支持  |
|   `--`   |   左边实线连接线描述文字   | 连接线描述文字 |  支持  |
|   `-.`   |   左边虚线连接线描述文字   | 连接线描述文字 |  支持  |
|   `==`   | 左边加粗实线连接线描述文字 | 连接线描述文字 |  支持  |
|   `=:`   | 左边加粗虚线连接线描述文字 | 连接线描述文字 | 不支持 |

- 组合单元

|               表示法                |               含义               |      类型      |  备注  |
| :---------------------------------: | :------------------------------: | :------------: | :----: |
|               `[[]]`                |              正方形              |    节点形状    | 不支持 |
|               `[()]`                |              圆柱体              |    节点形状    |  支持  |
|               `[{}]`                |              棱柱体              |    节点形状    | 不支持 |
|               `(())`                |               圆形               |    节点形状    |  支持  |
|               `([])`                |              体育场              |    节点形状    |  支持  |
|               `({})`                |               圆弧               |    节点形状    | 不支持 |
|             `双大括号`              |              六边形              |    节点形状    |  支持  |
|               `{[]}`                |             正多边形             |    节点形状    | 不支持 |
|               `{()}`                |               圆弧               |    节点形状    | 不支持 |
|                `-->`                |            实线带箭头            |   连接线样式   |  支持  |
|                `---`                |            实线无箭头            |   连接线样式   |  支持  |
|                `-.>`                |            虚线带箭头            |   连接线样式   | 不支持 |
|               `-.->`                |            虚线带箭头            |   连接线样式   |  支持  |
|                `.->`                |            虚线带箭头            |   连接线样式   |  支持  |
|                `-.-`                |            虚线无箭头            |   连接线样式   |  支持  |
|                `.-`                 |            虚线无箭头            |   连接线样式   |  支持  |
|                `==>`                |          加粗实线带箭头          |   连接线样式   |  支持  |
|                `===`                |          加粗实线无箭头          |   连接线样式   |  支持  |
|                `=:>`                |          加粗虚线带箭头          |   连接线样式   | 不支持 |
|               `=:=>`                |          加粗虚线带箭头          |   连接线样式   | 不支持 |
|                `=:=`                |          加粗虚线无箭头          |   连接线样式   | 不支持 |
|                `:=`                 |          加粗虚线无箭头          |   连接线样式   | 不支持 |
|              `双竖线`               |        右边连接线描述文字        | 连接线描述文字 |  支持  |
| `--connection line description-->`  |   左边实线带箭头连接线描述文字   | 连接线描述文字 |  支持  |
| `-.connection line description-.->` |   左边虚线带箭头连接线描述文字   | 连接线描述文字 |  支持  |
| `--connection line description---`  |   左边实线无箭头连接线描述文字   | 连接线描述文字 |  支持  |
| `-.connection line description-.-`  |   左边虚线无箭头连接线描述文字   | 连接线描述文字 |  支持  |
| `==connection line description==>`  | 左边加粗实线带箭头连接线描述文字 | 连接线描述文字 |  支持  |
| `=:connection line description=:=>` | 左边加粗虚线带箭头连接线描述文字 | 连接线描述文字 | 不支持 |
| `==connection line description===`  | 左边加粗实线无箭头连接线描述文字 | 连接线描述文字 |  支持  |
| `=:connection line description=:=`  | 左边加粗虚线无箭头连接线描述文字 | 连接线描述文字 | 不支持 |

### 有限语法

不论是节点形状还是连接线样式,语法支持是有限的,并不是随意组合的叠加状态,也可能随着后续更新会支持更多,一切以官方文档为主.

除了提供最基础的操作节点的能力之外,还可以根据 `JS` 和 `CSS` 相关知识高度自定义流程图行为表现,具体可参考官方文档.

> 官方文档: [https://mermaid-js.github.io/mermaid/#/flowchart?id=styling-and-classes](https://mermaid-js.github.io/mermaid/#/flowchart?id=styling-and-classes)
- 交互能力 Interaction : [https://mermaid-js.github.io/mermaid/#/flowchart?id=interaction](https://mermaid-js.github.io/mermaid/#/flowchart?id=interaction)
- 外观样式 Styling and classes : [https://mermaid-js.github.io/mermaid/#/flowchart?id=interaction](https://mermaid-js.github.io/mermaid/#/flowchart?id=interaction)
- 字体支持 Basic support for fontawesome: [https://mermaid-js.github.io/mermaid/#/flowchart?id=basic-support-for-fontawesome](https://mermaid-js.github.io/mermaid/#/flowchart?id=basic-support-for-fontawesome)
- 空格分隔 [https://mermaid-js.github.io/mermaid/#/flowchart?id=graph-declarations-with-spaces-between-vertices-and-link-and-without-semicolon](https://mermaid-js.github.io/mermaid/#/flowchart?id=graph-declarations-with-spaces-between-vertices-and-link-and-without-semicolon)
